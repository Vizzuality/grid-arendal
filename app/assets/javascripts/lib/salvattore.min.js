var salvattore=function(a,b,c){"use strict";var d={},e=[],f=[],g=[],h=function(a,b,c){a.dataset?a.dataset[b]=c:a.setAttribute("data-"+b,c)};return d.obtainGridSettings=function(c){var d=a.getComputedStyle(c,":before"),e=d.getPropertyValue("content").slice(1,-1),f=e.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),g=1,h=[];return f?(g=f[1],h=f[2],h=h?h.split("."):["column"]):(f=e.match(/^\s*\.(.+)\s+(\d+)\s*$/),f&&(h=f[1],g=f[2],g&&(g=g.split(".")))),{numberOfColumns:g,columnClasses:h}},d.addColumns=function(c,e){for(var m,f=d.obtainGridSettings(c),g=f.numberOfColumns,i=f.columnClasses,j=new Array(+g),k=b.createDocumentFragment(),l=g;0!==l--;)m="[data-columns] > *:nth-child("+g+"n-"+l+")",j.push(e.querySelectorAll(m));j.forEach(function(c){var d=b.createElement("div"),e=b.createDocumentFragment();d.className=i.join(" "),Array.prototype.forEach.call(c,function(b){e.appendChild(b)}),d.appendChild(e),k.appendChild(d)}),c.appendChild(k),h(c,"columns",g)},d.removeColumns=function(d){var e=b.createRange();e.selectNodeContents(d);var f=Array.prototype.filter.call(e.extractContents().childNodes,function(c){return c instanceof a.HTMLElement}),g=f.length,i=f[0].childNodes.length,j=new Array(i*g);Array.prototype.forEach.call(f,function(b,c){Array.prototype.forEach.call(b.children,function(b,d){j[d*g+c]=b})});var k=b.createElement("div");return h(k,"columns",0),j.filter(function(b){return!!b}).forEach(function(b){k.appendChild(b)}),k},d.recreateColumns=function(c){a.requestAnimationFrame(function(){d.addColumns(c,d.removeColumns(c));var b=new CustomEvent("columnsChange");c.dispatchEvent(b)})},d.mediaQueryChange=function(b){b.matches&&Array.prototype.forEach.call(e,d.recreateColumns)},d.getCSSRules=function(b){var c;try{c=b.sheet.cssRules||b.sheet.rules}catch(a){return[]}return c||[]},d.getStylesheets=function(){var c=Array.prototype.slice.call(b.querySelectorAll("style"));return c.forEach(function(a,b){"text/css"!==a.type&&""!==a.type&&c.splice(b,1)}),Array.prototype.concat.call(c,Array.prototype.slice.call(b.querySelectorAll("link[rel='stylesheet']")))},d.mediaRuleHasColumnsSelector=function(b){var c,d;try{c=b.length}catch(a){c=0}for(;c--;)if(d=b[c],d.selectorText&&d.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},d.scanMediaQueries=function(){var c=[];if(a.matchMedia){d.getStylesheets().forEach(function(b){Array.prototype.forEach.call(d.getCSSRules(b),function(b){try{b.media&&b.cssRules&&d.mediaRuleHasColumnsSelector(b.cssRules)&&c.push(b)}catch(a){}})});var e=f.filter(function(a){return c.indexOf(a)===-1});g.filter(function(a){return e.indexOf(a.rule)!==-1}).forEach(function(a){a.mql.removeListener(d.mediaQueryChange)}),g=g.filter(function(a){return e.indexOf(a.rule)===-1}),c.filter(function(a){return f.indexOf(a)==-1}).forEach(function(b){var c=a.matchMedia(b.media.mediaText);c.addListener(d.mediaQueryChange),g.push({rule:b,mql:c})}),f.length=0,f=c}},d.rescanMediaQueries=function(){d.scanMediaQueries(),Array.prototype.forEach.call(e,d.recreateColumns)},d.nextElementColumnIndex=function(b,c){var g,h,i,d=b.children,e=d.length,f=0,j=0;for(i=0;i<e;i++)g=d[i],h=g.children.length+(c[i].children||c[i].childNodes).length,0===f&&(f=h),h<f&&(j=i,f=h);return j},d.createFragmentsList=function(c){for(var d=new Array(c),e=0;e!==c;)d[e]=b.createDocumentFragment(),e++;return d},d.appendElements=function(b,c){var e=b.children,f=e.length,g=d.createFragmentsList(f);Array.prototype.forEach.call(c,function(c){var e=d.nextElementColumnIndex(b,g);g[e].appendChild(c)}),Array.prototype.forEach.call(e,function(b,c){b.appendChild(g[c])})},d.prependElements=function(c,e){var f=c.children,g=f.length,h=d.createFragmentsList(g),i=g-1;e.forEach(function(b){var c=h[i];c.insertBefore(b,c.firstChild),0===i?i=g-1:i--}),Array.prototype.forEach.call(f,function(b,c){b.insertBefore(h[c],b.firstChild)});for(var j=b.createDocumentFragment(),k=e.length%g;0!==k--;)j.appendChild(c.lastChild);c.insertBefore(j,c.firstChild)},d.registerGrid=function(c,f){var g=b.createRange();g.selectNodeContents(c);var i=b.createElement("div");i.appendChild(g.extractContents()),h(i,"columns",0),d.addColumns(c,i),e.push(c),null!=f&&f()},d.init=function(b,c){"function"!=typeof c&&(c=null),d.registerGrid(b,c),d.scanMediaQueries()},{appendElements:d.appendElements,prependElements:d.prependElements,registerGrid:d.registerGrid,recreateColumns:d.recreateColumns,rescanMediaQueries:d.rescanMediaQueries,init:d.init,append_elements:d.appendElements,prepend_elements:d.prependElements,register_grid:d.registerGrid,recreate_columns:d.recreateColumns,rescan_media_queries:d.rescanMediaQueries}}(window,window.document);