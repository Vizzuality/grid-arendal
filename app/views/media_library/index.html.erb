<div class="l-header-library -media-library">
  <div class="overlay"></div>
  <%= render 'shared/menu' %>
  <div class="row">
    <div class="small-12 columns">
      <div class="title-block">
        <h1 class="text -title-library">Media library</h1>
        <div class="text -summary">
          <%= @section.description %>
        </div>
        <%= render 'shared/share' %>
      </div>
    </div>
  </div>
</div>
<div class="l-main-content -media-library -only-grid -color-4">
  <% filters = [
    {
      data: @tags,
      type: 'tags',
      title: 'FILTER BY',
      placeholder: 'Filter by tags',
      key: 'tags'
    }
  ] %>
  <%= render 'shared/filters', filters: filters %>

  <div class="row">
    <div class="small-12 small-centered columns grid-column">
      <div class="masonry-layout" data-columns="4">
        <% @media_contents.each do |media| %>
          <% picture_url = case media.type
                            when MediaContent::TYPE_ALBUM
                              photo = media.photos.order("id ASC").first
                              photo ? photo.photo_sizes.where(label: PhotoSize::MEDIUM).first.try(:url) : nil
                            when MediaContent::TYPE_PHOTO
                              media.photo_sizes.where(label: PhotoSize::MEDIUM).first.try(:url)
                            else
                              nil
                            end %>
          <%= render 'shared/media_card',
            picture: picture_url,
            title: media.title,
            link: medium_path(media),
            photos_count: media.type == 'Album' ? media.photos.size : 0,
            videos_count: 0 %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= render 'shared/footer' %>
