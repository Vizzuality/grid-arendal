<% tabs = case controller_name
          when 'albums', 'photos'
            [
              {title: "Albums", key: "albums", path: albums_path,
               count: Album.count},
               {title: "Pictures", key: "photos", path: photos_path,
                count: Photo.count}
            ]
          when 'collections', 'graphics'
            [
              {title: "Collections", key: "collections", path: collections_path,
               count: Collection.count},
               {title: "Graphics", key: "graphics", path: graphics_path,
                count: Graphic.count}
            ]
          else
            [
              {title: "Videos", key: "videos", path: videos_path,
               count: Video.count}
            ]
          end
 %>
<div class="tabs">
  <% tabs.each do |tab| %>
    <a href="<%= tab[:path] %>">
      <div class="tab text -main-title -light <% if tab[:key] == key %>-selected<% end %>" data-type="<%= tab[:key] %>">
        <%= tab[:title] %>
        (<%= tab[:count] %>)
      </div>
    </a>
  <% end %>
</div>

<div class="buttons-bar">
  <% if ['albums', 'collections'].include?(controller_name) %>
    <%= link_to "Import from flickr", [:new, controller_name.singularize],
      class: 'btn -light -no-border -create-new js-create-new' %>
  <% elsif "videos" == controller_name && can?(:create, Video) %>
    <%= link_to "Create New", new_video_path, class: 'btn -light -no-border -create-new js-create-new' %>
  <% end %>
  <div class="btn">
    <svg class="icon">
      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-search"></use>
    </svg>
  </div>
  <div class="btn">
    <svg class="icon">
      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-sort"></use>
    </svg>
  </div>
</div>

<ul class="items-list">
  <% items.each do |media_content| %>
    <%= render 'backend/shared/index_item',
      item: media_content,
      title: media_content.title,
      selected: action_name != "index" && params[:id] == media_content.id.to_s
    %>
  <% end %>
</ul>
